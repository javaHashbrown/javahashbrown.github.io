{"data":{"markdownRemark":{"id":"237df9ee-fb69-58ed-ac04-48b1b4aba2d2","excerpt":"date: 2018-10-01 引子: 0.1+0.2===0.3 ? Number类型的二进制表示 二进制小数与二进制科学记数法 IEEE-754双精度浮点数 存储结构 计算方法 特殊情况 浮点数的误差 十进制转浮点数 舍入 0.1+0.2 参考文献 引子: 0.1+0.…","html":"<ul>\n<li><a href=\"#date-2018-10-01\">date: 2018-10-01</a></li>\n<li><a href=\"#%E5%BC%95%E5%AD%90-010203-\">引子: 0.1+0.2===0.3 ?</a></li>\n<li>\n<p><a href=\"#number%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA\">Number类型的二进制表示</a></p>\n<ul>\n<li><a href=\"#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A7%91%E5%AD%A6%E8%AE%B0%E6%95%B0%E6%B3%95\">二进制小数与二进制科学记数法</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ieee-754%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%B5%AE%E7%82%B9%E6%95%B0\">IEEE-754双精度浮点数</a></p>\n<ul>\n<li><a href=\"#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84\">存储结构</a></li>\n<li><a href=\"#%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95\">计算方法</a></li>\n<li><a href=\"#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5\">特殊情况</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E8%AF%AF%E5%B7%AE\">浮点数的误差</a></p>\n<ul>\n<li><a href=\"#%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%B5%AE%E7%82%B9%E6%95%B0\">十进制转浮点数</a></li>\n<li><a href=\"#%E8%88%8D%E5%85%A5\">舍入</a></li>\n</ul>\n</li>\n<li><a href=\"#0102\">0.1+0.2</a></li>\n<li>\n<p><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\">参考文献</a></p>\n<hr>\n</li>\n</ul>\n<h2 id=\"引子-010203-\"><a href=\"#%E5%BC%95%E5%AD%90-010203-\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引子: 0.1+0.2===0.3 ?</h2>\n<p>用一道有点无聊的面试题作为开篇：</p>\n<blockquote>\n<p>0.1+0.2==0.3的结果是什么？<br>\n当然是false</p>\n</blockquote>\n<p>为什么？简言之，因为JS的number类型是双精度浮点数，浮点数计算有误差。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token operator\">+</span><span class=\"token number\">0.2</span><span class=\"token operator\">==</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">//控制台输入，结果如下</span>\n<span class=\"token number\">0.1</span><span class=\"token operator\">+</span><span class=\"token number\">0.2</span> <span class=\"token comment\">//0.30000000000000004</span></code></pre></div>\n<p>至于具体原因就是本文的主题了，下文会依据浮点数的原理解释上述现象。 <br><br><br></p>\n<h2 id=\"number类型的二进制表示\"><a href=\"#number%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Number类型的二进制表示</h2>\n<p>跟其他强类型语言不同（比如C++,C#,Java等），作为动态语言的JS没有Int这样的整数类型。所有的数字，不管小数还是整数，只有一种类型：number。JS中的number类型是双精度浮点数，即用64位二进制数按照一定规则来存储及表示数字。浮点数的通行标准是IEEE-754，基本思想是使用科学记数法，利用<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>±</mo><mi>f</mi><mo>×</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\pm f \\times 2^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">±</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span></span></span>这样的形式来表示数字。\n<br><br></p>\n<h3 id=\"二进制小数与二进制科学记数法\"><a href=\"#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A7%91%E5%AD%A6%E8%AE%B0%E6%95%B0%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>二进制小数与二进制科学记数法</h3>\n<p>十进制的小数和科学记数法很好理解，但是二进制没那么直观。我们先看个简单的例子。<br>\n<br>\n<strong>例1  用二进制小数和科学记数法表示32.125</strong>  </p>\n<p>对于十进制来说<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>32.125</mn><mo>=</mo><mn>30</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>0.1</mn><mo>+</mo><mn>0.02</mn><mo>+</mo><mn>0.005</mn></mrow><annotation encoding=\"application/x-tex\">\\ 32.125=30+2+0.1+0.02+0.005</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span>， 可以拆分为以下几个部分</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">10<sup>1</sup></th>\n<th align=\"center\">10<sup>0</sup></th>\n<th align=\"center\">.</th>\n<th align=\"center\">10<sup>-1</sup></th>\n<th align=\"center\">10<sup>-2</sup></th>\n<th align=\"center\">10<sup>-3</sup></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">2</td>\n<td align=\"center\">.</td>\n<td align=\"center\">1</td>\n<td align=\"center\">2</td>\n<td align=\"center\">5</td>\n</tr>\n</tbody>\n</table>\n<p>所以<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>32.125</mn><mo>=</mo><mn>3</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>1</mn></msup><mo>+</mo><mn>2</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>0</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>2</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>2</mn></mrow></msup><mo>+</mo><mn>5</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>3.2125</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>1</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\ 32.125=3 \\times 10^1+2 \\times 10^0+1 \\times 10^{-1}+2 \\times 10^{-2}+5 \\times 10^{-3}=3.2125 \\times 10^{1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">2</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>类似的，对于二进制来说，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>32.125</mn><mo>=</mo><mn>32</mn><mo>+</mo><mn>0.125</mn></mrow><annotation encoding=\"application/x-tex\">32.125=32+0.125</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span></span></span></span>，可以拆分如下  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">2<sup>5</sup></th>\n<th align=\"center\">2<sup>4</sup></th>\n<th align=\"center\">2<sup>3</sup></th>\n<th align=\"center\">2<sup>2</sup></th>\n<th align=\"center\">2<sup>1</sup></th>\n<th align=\"center\">2<sup>0</sup></th>\n<th align=\"center\">.</th>\n<th align=\"center\">2<sup>-1</sup></th>\n<th align=\"center\">2<sup>-2</sup></th>\n<th align=\"center\">2<sup>-3</sup></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">.</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n</tr>\n</tbody>\n</table>\n<p>因此<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>32.125</mn><mo>=</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mn>5</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mn>4</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mn>3</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>2</mn></mrow></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>100000.00</mn><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mn>1.0000000</mn><msub><mn>1</mn><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mn>5</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\ 32.125=1 \\times 2^{5}+0 \\times 2^{4}+0 \\times 2^{3}+0 \\times 2^{2}+0 \\times 2^{1}+0 \\times 2^{0}+0 \\times 2^{-1}+0 \\times 2^{-2}+1 \\times 2^{-3}=100000.001_{2}=1.00000001_{2} \\times 2^{5}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>先记住这样的形式，接下来浮点数内容中会用到。<br>\n<br><br></p>\n<h2 id=\"ieee-754双精度浮点数\"><a href=\"#ieee-754%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%B5%AE%E7%82%B9%E6%95%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IEEE-754双精度浮点数</h2>\n<p>IEEE-754标准用64位二进制数，以二进制科学记数法的形式表示双精度浮点数，主要分为符号、指数、有效数字三部分。根据标准，64位浮点数的存储结构如下：\n<br></p>\n<h3 id=\"存储结构\"><a href=\"#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>存储结构</h3>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">63bit<br>(1 bit)</td>\n<td align=\"center\">62bit...52bit<br>(11 bits)</td>\n<td align=\"center\">51bit...0bit<br>(52 bits)</td>\n</tr>\n<tr>\n<td align=\"center\">0=>正数<br>1=>负数</td>\n<td align=\"center\">按照11bits无符号数处理<br>实际值=exponent-1023</td>\n<td align=\"center\">XXXXX视为二进制小数0.XXXXX<sub>2</sub><br>实际值=fraction+1</td>\n</tr>\n</tbody>\n</table>\n<p>基本计算公式是 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mi>N</mi><mo>=</mo><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mrow><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi></mrow></msup><mo>×</mo><msup><mn>2</mn><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>−</mo><mn>1023</mn></mrow></msup><mo>×</mo><mo>(</mo><mn>1</mn><mo>+</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">\\ N = (-1)^{sign}  \\times  2^{exponent-1023}  \\times  (1+fraction)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<br>\n<h3 id=\"计算方法\"><a href=\"#%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>计算方法</h3>\n<ol>\n<li>\n<p>符号位</p>\n<ul>\n<li>sign=0的时候为正数，sign=1的时候为负数，因此定义最终的符号计算方式为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mrow><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\ (-1)^{sign}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0746639999999998em;vertical-align:-0.25em;\"></span><span class=\"mspace\"> </span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>指数部分</p>\n<ul>\n<li>11位二进制数以无符号数处理，可以表示总共2<sup>11</sup>，即2048个数，可表示区间为[0, 2047]</li>\n<li>通过减去1023的偏移量，转换到区间[-1022,1023]，原区间0和2047作为特殊情况保留</li>\n</ul>\n</li>\n<li>\n<p>有效数部分</p>\n<ul>\n<li>按照标准规范之后，所有的数都默认第一位为1，因此存储时予以省略，仅存储小数点后的二进制部分</li>\n</ul>\n</li>\n</ol>\n<br>\n<p><strong>例2 写出32.125对应的IEEE浮点数</strong><br>\n例1中得到了\n<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>32.125</mn><mo>=</mo><mn>1.0000000</mn><msub><mn>1</mn><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mn>5</mn></msup></mrow><annotation encoding=\"application/x-tex\">32.125=1.00000001_2 \\times 2^{5}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span>  </p>\n<p>下面根据浮点数的计算公式，计算对应的二进制表示</p>\n<ul>\n<li>\n<p>符号位：32.125显然为正数，因此符号位是0</p>\n</li>\n<li>\n<p>指数部分：指数为5，根据公式，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>=</mo><mn>5</mn><mo>+</mo><mn>1023</mn><mo>=</mo><mn>1028</mn><mo>=</mo><mn>1024</mn><mo>+</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">exponent = 5+1023=1028=1024+4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>，因此指数部分11位二进制数为<code>100 0000 0100</code>，如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">10bit</th>\n<th align=\"center\">9bit</th>\n<th align=\"center\">8bit</th>\n<th align=\"center\">7bit</th>\n<th align=\"center\">6bit</th>\n<th align=\"center\">5bit</th>\n<th align=\"center\">4bit</th>\n<th align=\"center\">3bit</th>\n<th align=\"center\">2bit</th>\n<th align=\"center\">1bit</th>\n<th align=\"center\">0bit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">2<sup>10</sup>=1024</td>\n<td align=\"center\">2<sup>9</sup>=512</td>\n<td align=\"center\">2<sup>8</sup>=256</td>\n<td align=\"center\">2<sup>7</sup>=128</td>\n<td align=\"center\">2<sup>6</sup>=64</td>\n<td align=\"center\">2<sup>5</sup>=32</td>\n<td align=\"center\">2<sup>4</sup>=16</td>\n<td align=\"center\">2<sup>3</sup>=8</td>\n<td align=\"center\">2<sup>2</sup>=4</td>\n<td align=\"center\">2<sup>1</sup>=2</td>\n<td align=\"center\">2<sup>0</sup>=1</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>小数部分：因为标准只存储小数部分，因此<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mn>1.00000001</mn><mo>−</mo><mn>1</mn><mo>=</mo><mn>0.0000000</mn><msub><mn>1</mn><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\ fraction=1.00000001-1=0.00000001_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mspace\"> </span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，如下：</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">51bit</th>\n<th align=\"center\">50bit</th>\n<th align=\"center\">49bit</th>\n<th align=\"center\">48bit</th>\n<th align=\"center\">47bit</th>\n<th align=\"center\">46bit</th>\n<th align=\"center\">45bit</th>\n<th align=\"center\">44bit</th>\n<th align=\"center\">43bit</th>\n<th align=\"center\">42bit</th>\n<th align=\"center\">...</th>\n<th align=\"center\">0bit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">0</td>\n<td align=\"center\">...</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody>\n</table>\n<p>最终的二进制表示为</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">10000000100</td>\n<td align=\"center\">(1).0000000100000000000000000000000000000000000000000000</td>\n</tr>\n</tbody>\n</table>\n<br>\n<h3 id=\"特殊情况\"><a href=\"#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>特殊情况</h3>\n<p>特殊情况有3种，分别是0，正负无穷大和NaN：</p>\n<ul>\n<li>\n<p>0</p>\n<ul>\n<li>符号位为0</li>\n<li>指数部分全为0，即exponent为0</li>\n<li>小数部分为0</li>\n</ul>\n</li>\n<li>\n<p>无穷大</p>\n<ul>\n<li>符号位任意</li>\n<li>指数部分全为1，即exponent为2047</li>\n<li>小数部分为0</li>\n</ul>\n</li>\n<li>\n<p>NaN</p>\n<ul>\n<li>符号位任意</li>\n<li>指数部分全为1，即exponent为2047</li>\n<li>小数部分非0</li>\n</ul>\n</li>\n</ul>\n<p><br><br></p>\n<h2 id=\"浮点数的误差\"><a href=\"#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E8%AF%AF%E5%B7%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>浮点数的误差</h2>\n<p>双精度浮点数只有64位，如果一个十进制数无法被64位二进制数完整表示，那么就会产生误差。首先十进制数需要转换为二进制数，再将二进制数转换为符合IEEE-754标准的形式。这个过程有可能带来误差。<br>\n<br></p>\n<h3 id=\"十进制转浮点数\"><a href=\"#%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%B5%AE%E7%82%B9%E6%95%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>十进制转浮点数</h3>\n<p>十进制转换时，按照整数部分+小数部分分别计算的原则。整数部分使用除2取余法，小数部分使用乘2取整法。<br>\n<br></p>\n<p><strong>例3 32.125转换为二进制数</strong><br>\n先处理整数部分32</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">被除数</th>\n<th align=\"center\">商</th>\n<th align=\"center\">余数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">32</td>\n<td align=\"center\">16</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">16</td>\n<td align=\"center\">8</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">8</td>\n<td align=\"center\">4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">2</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n</tr>\n</tbody>\n</table>\n<p><strong>从下往上取余数，于是得到<code>10 0000</code></strong>  </p>\n<p>再处理小数部分  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">被乘数</th>\n<th align=\"center\">积</th>\n<th align=\"center\">整数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0.125</td>\n<td align=\"center\">0.25</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.25</td>\n<td align=\"center\">0.5</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.5</td>\n<td align=\"center\">1</td>\n<td align=\"center\">1</td>\n</tr>\n</tbody>\n</table>\n<p><strong>从上往下取整数，得到<code>001</code></strong></p>\n<p>所以最后得到<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>32.125</mn><mo>=</mo><mn>100000.00</mn><msub><mn>1</mn><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\ 32.125=100000.001_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">3</span><span class=\"mord\">2</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>。<br>\n<br>\n<strong>例4 将0.1转换为IEEE浮点数</strong><br>\n按照例3中的小数转换为二进制的方法，计算如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">被乘数</th>\n<th align=\"center\">积</th>\n<th align=\"center\">整数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0.1</td>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0.8</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.8</td>\n<td align=\"center\">1.6</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.6</td>\n<td align=\"center\">1.2</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0.8</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.8</td>\n<td align=\"center\">1.6</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.6</td>\n<td align=\"center\">1.2</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody>\n</table>\n<p>可以看到出现了循环，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>0.</mn><msub><mn>1</mn><mn>10</mn></msub><mo>=</mo><mn>0.0</mn><msub><mover accent=\"true\"><mn>0011</mn><mo stretchy=\"true\">‾</mo></mover><mn>2</mn></msub><mo>=</mo><mn>1.1</mn><msub><mover accent=\"true\"><mn>0011</mn><mo stretchy=\"true\">‾</mo></mover><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>4</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\ 0.1_{10} = 0.0\\overline{0011}_2=1.1 \\overline{0011}_2 \\times 2^{-4}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9944400000000001em;vertical-align:-0.15em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\"><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8444400000000001em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span><span style=\"top:-3.76444em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9944400000000001em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8444400000000001em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span><span style=\"top:-3.76444em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span>  </p>\n<p>无限循环的0.1无法被有限64位完整表示，必须截断后才能保存，这个过程必然会带来误差。先按照例2的方法，可将其转换为浮点数，如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n<th align=\"center\">无法表示部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111011‬</td>\n<td align=\"center\">(1).1001100110011001100110011001100110011001100110011001</td>\n<td align=\"center\">10011...0011...</td>\n</tr>\n</tbody>\n</table>\n<br>\n<h3 id=\"舍入\"><a href=\"#%E8%88%8D%E5%85%A5\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>舍入</h3>\n<p>IEEE-754规范默认采用的舍入规则是“向最接近的值舍入”，即数字向上或向下舍入，使得舍入后的值最接近原值，如果二者精确度相同，选择偶数的结果。在二进制中，最后一位为0是偶数，1是奇数。<br>\n<br>\n<strong>例4-续</strong>  </p>\n<p>0.1的二进制小数是无限循环的，转换为浮点数必然存在舍入操作</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n<th align=\"center\">无法表示部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111011‬</td>\n<td align=\"center\">(1).10011001100110011001100110011001100110011001100110<strong>01</strong></td>\n<td align=\"center\"><strong>1001</strong>1...0011...</td>\n</tr>\n</tbody>\n</table>\n<p>为了便于描述，取fraction后2位视为整数，取无法表示部分前4位作为小数，合并记为<code>01.1001</code>，如上表中黑体部分。根据舍入规则，fraction最后2位有效数字为<code>01</code>，如果向上舍入变为<code>10</code>，向下舍入变为<code>00</code>，如何选择呢？  </p>\n<blockquote>\n<p><code>01.1001</code>的整数部分<code>01</code>，正好是向上舍入后值<code>10</code>的一半，再加上小数部分大于<code>10</code>的一半，因此向上舍入为<code>10</code>的误差小于向下舍入为<code>00</code>的误差，所以这里选择向上舍入。</p>\n</blockquote>\n<p>因此，0.1<sub>10</sub>以二进制形式保存的值实际上比自身要大一点点，具体表示如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111011‬</td>\n<td align=\"center\">(1).10011001100110011001100110011001100110011001100110<strong>10</strong></td>\n</tr>\n</tbody>\n</table>\n<br>\n<p><strong>例5 将0.2转换为IEEE浮点数</strong><br>\n与例4类似，转换过程如下</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">被乘数</th>\n<th align=\"center\">积</th>\n<th align=\"center\">整数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0.8</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.8</td>\n<td align=\"center\">1.6</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.6</td>\n<td align=\"center\">1.2</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0.8</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.8</td>\n<td align=\"center\">1.6</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.6</td>\n<td align=\"center\">1.2</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td align=\"center\">0.2</td>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">0.4</td>\n<td align=\"center\">0.8</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody>\n</table>\n<p>可以看到也出现了循环，因此<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext> </mtext><mn>0.</mn><msub><mn>2</mn><mn>10</mn></msub><mo>=</mo><mn>0.</mn><msub><mover accent=\"true\"><mn>0011</mn><mo stretchy=\"true\">‾</mo></mover><mn>2</mn></msub><mo>=</mo><mn>1.1</mn><msub><mover accent=\"true\"><mn>0011</mn><mo stretchy=\"true\">‾</mo></mover><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\ 0.2_{10} = 0.\\overline{0011}_2=1.1\\overline{0011}_2 \\times 2^{-3}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9944400000000001em;vertical-align:-0.15em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8444400000000001em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span><span style=\"top:-3.76444em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9944400000000001em;vertical-align:-0.15em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord overline\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8444400000000001em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span><span style=\"top:-3.76444em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>转换为浮点数如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n<th align=\"center\">无法表示部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111100</td>\n<td align=\"center\">(1).10011001100110011001100110011001100110011001100110<strong>01</strong></td>\n<td align=\"center\">10011...0011...</td>\n</tr>\n</tbody>\n</table>\n<p>按照舍入规则，最终二进制表示为</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111100‬</td>\n<td align=\"center\">(1).10011001100110011001100110011001100110011001100110<strong>10</strong></td>\n</tr>\n</tbody>\n</table>\n<p>可以看到，它比真实的0.2也大了一点点。</p>\n<p><br><br></p>\n<h2 id=\"0102\"><a href=\"#0102\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0.1+0.2</h2>\n<p>按照规范，两个浮点数计算时有一个步骤叫做<strong>对阶</strong>，就是让2个操作数的小数点对齐，把较小的指数转化为较大的指数，然后再按照符号进行小数部分的计算。以0.1+0.2为例：  </p>\n<blockquote>\n<p>0.1<sub>10</sub> =1.1<strong>0011</strong><sub>2</sub>×2<sup>-4</sup><br>\n0.2<sub>10</sub> = 1.1<strong>0011</strong><sub>2</sub>×2<sup>-3</sup>  </p>\n</blockquote>\n<p>计算时，要将0.1变为0.2的同阶  </p>\n<blockquote>\n<p>0.1<sub>10</sub> =0.11<strong>0011</strong><sub>2</sub>×2<sup>-3</sup><br>\n0.2<sub>10</sub> = 1.1<strong>0011</strong><sub>2</sub>×2<sup>-3</sup>  </p>\n</blockquote>\n<p>反映到二进制上就是对0.1的二进制码进行右移。因为两数的指数仅相差1，因此只需要右移1位：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">0.1</th>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"left\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">移位前</td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111<strong>011</strong>‬</td>\n<td align=\"left\">(1).1001100110011001100110011001100110011001100110011010</td>\n</tr>\n<tr>\n<td align=\"center\">移位后</td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111<strong>100</strong>‬</td>\n<td align=\"left\">(0).1100110011001100110011001100110011001100110011001101(0)</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"center\">0.2</th>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">不移位</td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111100‬</td>\n<td align=\"center\">(1).1001100110011001100110011001100110011001100110011010</td>\n</tr>\n</tbody>\n</table>\n<p>相加时，指数不变，有效数部分（包括隐含的1）进行相加，变成了</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>0.1100110011001100110011001100110011001100110011001101</mn><mspace linebreak=\"newline\"></mspace><mo>+</mo><mn>1.1001100110011001100110011001100110011001100110011010</mn><mspace linebreak=\"newline\"></mspace><mo>=</mo><mn>10.0110011001100110011001100110011001100110011001100111</mn></mrow><annotation encoding=\"application/x-tex\">0.1100110011001100110011001100110011001100110011001101\\\\+1.1001100110011001100110011001100110011001100110011010\\\\\n=10.0110011001100110011001100110011001100110011001100111</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span></span></span>\n<p>因为规范要求有效数的第一位为1，所以需要将和的小数点左移1位，同时指数部分加1。移位后有效数小数部分发生舍入。<br>\n舍入时，最后四位是011(1)，向上舍入变成100，向下舍入变为011。原值恰好位于二者中间，无论舍入方案如何，误差都一样。在“向最接近的值舍入”失效的情况下，采用舍入后是偶数的表示形式，即向上舍入变为100。  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">0.1+0.2</th>\n<th align=\"center\">符号位sign</th>\n<th align=\"center\">指数exponent</th>\n<th align=\"center\">有效数fraction</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">移位前</td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111<strong>100</strong>‬</td>\n<td align=\"center\">(10).0110011001100110011001100110011001100110011001100<strong>111</strong></td>\n</tr>\n<tr>\n<td align=\"center\"><strong>移位后</strong></td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111<strong>101</strong></td>\n<td align=\"center\">(1).0011001100110011001100110011001100110011001100110<strong>011</strong>(1)</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>舍入后</strong></td>\n<td align=\"center\">0</td>\n<td align=\"center\">01111111<strong>101</strong></td>\n<td align=\"center\">(1).0011001100110011001100110011001100110011001100110<strong>100</strong></td>\n</tr>\n</tbody>\n</table>\n<p>再将二进制码转换为十进制数，于是得到<br>\n<strong>0.1+0.2</strong> = (-1)<sup>0</sup>×2<sup>(1021-1023)</sup>×(1+1×2<sup>-3</sup>+1×2<sup>-4</sup>+1×2<sup>-7</sup>+1×2<sup>-8</sup>+1×2<sup>-11</sup>+1×2<sup>-12</sup>+1×2<sup>-15</sup>+1×2<sup>-16</sup>+1×2<sup>-19</sup>+1×2<sup>-20</sup>+1×2<sup>-23</sup>+1×2<sup>-24</sup>+1×2<sup>-27</sup>+1×2<sup>-28</sup>+1×2<sup>-31</sup>+1×2<sup>-32</sup>+1×2<sup>-35</sup>+1×2<sup>-36</sup>+1×2<sup>-39</sup>+1×2<sup>-40</sup>+1×2<sup>-43</sup>+1×2<sup>-44</sup>+1×2<sup>-47</sup>+1×2<sup>-48</sup>+1×2<sup>-50</sup>)<strong>=0.3000000000000000444089209850062616169452667236328125 ≈ 0.30000000000000004</strong></p>\n<h3 id=\"---omit-in-toc----题外话\"><a href=\"#---omit-in-toc----%E9%A2%98%E5%A4%96%E8%AF%9D\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><!-- omit in toc --> 题外话</h3>\n<ul>\n<li>\n<p>为什么按照<code>符号位->指数->有效数</code>这样的顺序进行排列二进制位？</p>\n<ul>\n<li>这样可以提高比较的速度，尽量实现一次比较得出结果：</li>\n<li>首先比较符号位，如果正负不同，谁大谁小一目了然；</li>\n<li>如果符号相同，那么比较指数，指数大的更大；</li>\n<li>如果指数也相同，那么最后再比较有效数的部分；</li>\n<li>所以才将符号位放在的最高权重位MSB上，而指数和有效数依次放在后面。</li>\n</ul>\n</li>\n<li>很显然指数可正可负，这样可以分别表示大于1或小于1的数；</li>\n<li>如果用补码表示，比较的时候又需要先比较符号位再比较数据位，规则太复杂。因此直接把11bits的指数部分当作了无符号数进行计算比较，再通过一个偏移把它映射到一个包含正负的对称区间内；</li>\n<li>11位的二进制数可以表示2<sup>11</sup>，即2048个数，所以11位无符号数可以表示区间[0, 2047]，通过减去偏移1024或1023，可以分别映射为2个对称区间：[-1024, 1023]或[-1023,1024]。</li>\n<li>\n<p>标准中最终选择了1023作为偏移，原区间内0和2047作为特殊情况保留，得到转换后的有效指数区间[-1022,1023]。至于标准为什么要映射到对称区间，同时偏移为什么选择1023</p>\n<blockquote>\n<p>The reason for having <code>|emin| &#x3C; emax</code> is so that the reciprocal of the smallest number  will not overflow. Although it is true that the reciprocal of the largest number will underflow, underflow is usually less serious than overflow.</p>\n</blockquote>\n</li>\n<li>因为浮点数可以有多种表示方式，比如1.1<sub>2</sub>×2<sup>5</sup>，也可以写作11<sub>2</sub>×2<sup>4</sup>，又或者0.11<sub>2</sub>×2<sup>6</sup>（因为小数点的位置可变，所以这种类型被称为浮点数）。为了规范表示，避免出现同一个数出现多种表示方法的情况，标准规定采用前者的形式，即第一位始终为1</li>\n<li>这样隐性增加了1位，提高了精度 </li>\n</ul>\n<hr>\n<h2 id=\"参考文献\"><a href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考文献</h2>\n<ol>\n<li><a href=\"https://floating-point-gui.de/formats/fp/\" target=\"_blank\" rel=\"noopener\">https://floating-point-gui.de/formats/fp/</a></li>\n<li><a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" target=\"_blank\" rel=\"noopener\">https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a></li>\n<li><a href=\"https://www.cnblogs.com/bossin/archive/2007/04/08/704567.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/bossin/archive/2007/04/08/704567.html</a></li>\n<li><a href=\"https://www.eecs.wsu.edu/~jdelgado/EE334/chp3b.pdf\" target=\"_blank\" rel=\"noopener\">https://www.eecs.wsu.edu/~jdelgado/EE334/chp3b.pdf</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Exponent_bias\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Exponent_bias</a></li>\n<li><a href=\"http://blog.reverberate.org/2014/09/what-every-computer-programmer-should.html\" target=\"_blank\" rel=\"noopener\">http://blog.reverberate.org/2014/09/what-every-computer-programmer-should.html</a></li>\n<li><a href=\"http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html\" target=\"_blank\" rel=\"noopener\">http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html</a> </li>\n<li><a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" target=\"_blank\" rel=\"noopener\">https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/</a></li>\n<li><a href=\"http://www.oxfordmathcenter.com/drupal7/node/43\" target=\"_blank\" rel=\"noopener\">http://www.oxfordmathcenter.com/drupal7/node/43</a></li>\n<li><a href=\"https://blog.angularindepth.com/the-mechanics-behind-exponent-bias-in-floating-point-9b3185083528\" target=\"_blank\" rel=\"noopener\">https://blog.angularindepth.com/the-mechanics-behind-exponent-bias-in-floating-point-9b3185083528</a></li>\n</ol>","tableOfContents":"<ul>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E5%BC%95%E5%AD%90-010203-\">引子: 0.1+0.2===0.3 ?</a></li>\n<li>\n<p><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#number%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA\">Number类型的二进制表示</a></p>\n<ul>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A7%91%E5%AD%A6%E8%AE%B0%E6%95%B0%E6%B3%95\">二进制小数与二进制科学记数法</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#ieee-754%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%B5%AE%E7%82%B9%E6%95%B0\">IEEE-754双精度浮点数</a></p>\n<ul>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84\">存储结构</a></li>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95\">计算方法</a></li>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5\">特殊情况</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E8%AF%AF%E5%B7%AE\">浮点数的误差</a></p>\n<ul>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%B5%AE%E7%82%B9%E6%95%B0\">十进制转浮点数</a></li>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E8%88%8D%E5%85%A5\">舍入</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#0102\">0.1+0.2</a></p>\n<ul>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#---omit-in-toc----%E9%A2%98%E5%A4%96%E8%AF%9D\">&#x3C;!-- omit in toc --> 题外话</a></li>\n</ul>\n</li>\n<li><a href=\"/237df9ee-fb69-58ed-ac04-48b1b4aba2d2/#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\">参考文献</a></li>\n</ul>","frontmatter":{"date":"October 01, 2018","title":"IEEE-754标准与JS中的number类型","image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwkC0D//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAERACAhMUH/2gAIAQEAAT8hQT3McFf/2gAMAwEAAgADAAAAEDDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgEFAQAAAAAAAAAAAAAAAREAECExUWFx/9oACAEBAAE/EFAwDTvCXwelxjkZSr//2Q==","aspectRatio":1.5056179775280898,"src":"/static/9983387778f1c70c0ce32374522d12c6/d7b72/post-default-bg.jpg","srcSet":"/static/9983387778f1c70c0ce32374522d12c6/2347c/post-default-bg.jpg 750w,\n/static/9983387778f1c70c0ce32374522d12c6/5a448/post-default-bg.jpg 1500w,\n/static/9983387778f1c70c0ce32374522d12c6/d7b72/post-default-bg.jpg 3000w,\n/static/9983387778f1c70c0ce32374522d12c6/439d2/post-default-bg.jpg 4288w","sizes":"(max-width: 3000px) 100vw, 3000px"}}}}}},"pageContext":{"slug":"/..F:\\application\\gatsby-test\\my-blog/IEEE-754标准与JS中的number类型/","previous":{"fields":{"slug":"/..F:\\application\\gatsby-test\\my-blog/JS中的隐式转换/"},"frontmatter":{"title":"JS中的隐式转换"}},"next":{"fields":{"slug":"/..F:\\application\\gatsby-test\\my-blog/array.indexof和array.includes/"},"frontmatter":{"title":"array.indexOf和array.includes"}}}}