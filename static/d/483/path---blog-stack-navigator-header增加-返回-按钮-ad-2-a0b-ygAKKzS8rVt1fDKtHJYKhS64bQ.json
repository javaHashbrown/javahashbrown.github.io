{"data":{"markdownRemark":{"id":"c69108d6-77b9-5b76-9f07-1cda1d687261","excerpt":"StackNavigator 自带了 navigationOptions 属性，但必须以静态对象申明 实现有 3 个要点： navigationOptions 对象里，创建{param}常量，然后 headerLeft 或者 headerRight…","html":"<p>StackNavigator 自带了 navigationOptions 属性，但必须以静态对象申明</p>\n<p>实现有 3 个要点：</p>\n<ol>\n<li>navigationOptions 对象里，创建{param}常量，然后 headerLeft 或者 headerRight 里配置好闭包函数<br>\n这样做是因为 navigation 是类的实例成员，无法通过类成员访问，所以需要用闭包绕开这一限制</li>\n<li>在 DidMount 事件中配置 params 的闭包函数对象</li>\n<li>页面跳转的执行函数</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">static</span> <span class=\"token function-variable function\">navigationOptions</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>navigation<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>params<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> navigation<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n      title<span class=\"token punctuation\">:</span> <span class=\"token string\">'PlayGround'</span><span class=\"token punctuation\">,</span>\n      headerRight<span class=\"token punctuation\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span><span class=\"token comment\">//之前提到过，占位的用的空view</span>\n      headerLeft<span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span> <span class=\"token attr-name\">onPress</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>params<span class=\"token punctuation\">.</span>handleNavigation <span class=\"token operator\">&amp;&amp;</span> params<span class=\"token punctuation\">.</span><span class=\"token function\">handleNavigation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      headerStyle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span></span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      headerTitleStyle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        textAlign<span class=\"token punctuation\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n        alignSelf<span class=\"token punctuation\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n        fontSize<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//页面跳转执行函数</span>\n  <span class=\"token function\">toOtherScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pageDest'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span><span class=\"token function\">setParams</span><span class=\"token punctuation\">(</span>\n      handleNavigation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">toOtherScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"date":"September 26, 2017","title":"StackNavigator Header增加“返回”按钮","image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwkC0D//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAERACAhMUH/2gAIAQEAAT8hQT3McFf/2gAMAwEAAgADAAAAEDDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgEFAQAAAAAAAAAAAAAAAREAECExUWFx/9oACAEBAAE/EFAwDTvCXwelxjkZSr//2Q==","aspectRatio":1.5056179775280898,"src":"/static/9983387778f1c70c0ce32374522d12c6/d7b72/post-default-bg.jpg","srcSet":"/static/9983387778f1c70c0ce32374522d12c6/2347c/post-default-bg.jpg 750w,\n/static/9983387778f1c70c0ce32374522d12c6/5a448/post-default-bg.jpg 1500w,\n/static/9983387778f1c70c0ce32374522d12c6/d7b72/post-default-bg.jpg 3000w,\n/static/9983387778f1c70c0ce32374522d12c6/439d2/post-default-bg.jpg 4288w","sizes":"(max-width: 3000px) 100vw, 3000px"}}}}}},"pageContext":{"slug":"/Blog/StackNavigator Header增加“返回”按钮/","previous":{"fields":{"slug":"/Blog/header title在Android下不居中问题的解决技巧/"},"frontmatter":{"title":"header title在Android下不居中问题的解决技巧"}},"next":{"fields":{"slug":"/Blog/react-native-init以指定版本创建project/"},"frontmatter":{"title":"react-native-init以指定版本创建project"}}}}