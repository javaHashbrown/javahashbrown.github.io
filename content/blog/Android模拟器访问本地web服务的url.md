---
title: 'Android模拟器访问本地web服务的url'
date: 2018-03-29
---

不会自己搭`mock server`的前端不是好前端。  
后台开发和前端开发不能完全实现同步，一直停下等后台是要出问题的。
于是基于`json-server`搭了一个 API 本地测试服务器，却遇到了一个莫名其妙但极其简单的问题，简单记录一下，避免以后二次踩坑。

> ### TL;DR
>
> **Android 模拟器访问本地服务器，把 url 设置成`10.0.2.2`或者本机 IP 地址**  
> **Android 真机访问本地服务器，同一个局域网内，把 url 设置成本机 IP 地址**

1. 踩坑  
   使用`Android`模拟器访问`mock server`的时候发现使用`http://localhost:3000`的默认配置怎么都取不到数据。
   查了无数遍`http`包头、API 返回的`response`，一无所获。
   过了老半天才恍然大悟，`Android`本来就是一个系统，自己也是有`ip`地址的，本机运行的时候应该**设置成`Android`内置的地址`http://10.0.2.2:3000`**

2. 进阶试验  
   然后想到了一个问题，`Android`模拟器和本机在同一个局域网内，那么`url`改成本机的 IP 地址，应该也是可以访问的。
   测试果然可行，这个方法适合`Android`真机调试。
